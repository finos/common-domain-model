# *Product - Modifying and adding qualification functions*

_Background_

Qualification functions are used extensively in CDM and Digital Regulatory Reporting to determine the type of product.

Several functions were added and modified in CDM 5 without the changes being applied to CDM 6 & 7. This update adds qualification functions to CDM 6 & 7

_What is being released?_

Added qualification functions

- `Qualify_TotalReturnSwap_Index` - This function qualifies a product as a Total Return Swap (Index) where the base product qualifies as Credit Swap and the index underlier for performance leg qualifies as Credit.
- `Qualify_Equity_OtherForward` - This function qualifies a product as a Equity Forward (Other) where the base product qualifies as Equity Forward with non-standard terms.

_Modified qualification functions_

- `Qualify_AssetClass_Credit` - Updated to check for credit underlier of the performance payout.
- `Qualify_BaseProduct_EquityForward` - Updated to check that `nonStandardisedTerms` on the settlement payout are either absent or False

Review Directions

Changes can be reviewed in PR: [#4177](https://github.com/finos/common-domain-model/pull/4177)

# *CDM Distribution - Python generation to utilize new process*

*Background*

The upcoming release of CDM 7 will standardize the serialization format (Issue #3236) and include a new Python library generated by updated tooling.

_What is being released?_

The Python library will use updated tooling that supports metadata.  Python support for functions will arrive in a subsequent update.

Note that the new Python library for CDM 6.x.x will use the new serialization format that is not backward compatible with data produced by the old Python libraries.  Before standardization, cross-language data exchange (e.g., between Java and Python) was not guaranteed. The new Python tooling facilitates such compatibility by implementing the new format.

Detail on the changes can be found at [Issue #3878](https://github.com/finos/common-domain-model/issues/3878)

_Review Directions_

Changes can be reviewed in PR: [#4141](https://github.com/finos/common-domain-model/pull/4141)

# _Infrastructure - Dependency Update_

_What is being released?_

This release updates the `DSL` dependency.

Version updates include:
- `DSL` `9.68.0` Allow usage of the `switch` operator on types which exist in other namespaces. See DSL release notes: [DSL 9.68.0](https://github.com/finos/rune-dsl/releases/tag/9.68.0)

No expectations are updated as part of this release.

_Review Directions_

The changes can be reviewed in PR: [#4135](https://github.com/finos/common-domain-model/pull/4135)

# Qualification and Validation - Fix use of empty in conditions and qualification functions

*Background*

An upcoming DSL release has found a number of areas where the use of `empty` in qualification functions and conditions was not being handled correctly. This change contains fixes that prepare the model for the upcoming DSL release.

*What is being released?*

The following functions have been updated:

- Qualify_Substitution
    - Check for existence of `beforeEconomicterms -> terminationDate` instead of the existence of `beforeEconomicterms`.
    - Check for existence of `openEconomicTerms -> effectiveDate` and `openEconomicTerms -> terminationDate` instead of the existence of `openEconomicTerms`.

- Qualify_Roll
    - Check for existence of `beforeEconomicterms -> collateral` instead of the existence of `beforeEconomicterms`.
    - Check for existence of `openEconomicTerms -> collateral` instead of the existence of `openEconomicTerms`.

- UnderlierQualification
    - Check `securityType` exists before comparing to `instrumentType`.

- ObservableQualification
    - Check `securityType` exists before comparing to `instrumentType`.
    - Check `assetClass` exists before comparing to `Index ->> assetClass`.


The following types have been updated:

- NonNegativeQuantitySchedule
    - Split condition `NonNegativeQuantity_value` into two conditions `NonNegativeQuantity_value` and `NonNegativeQuantity_datedValue`.

- ValuationMethod
    - Check for existence of `quotationAmount -> unit -> currency` instead of the existence of `quotationAmount`.
    - Check for existence of `minimumQuotationAmount -> unit -> currency` instead of the existence of `minimumQuotationAmount`.

- FixedPrice
    - Split condition `NonNegativePrice_amount` into two conditions `NonNegativePrice_amount` and `NonNegativePrice_datedValue`.

*Review Directions*

Changes can be reviewed in PR: [#4118](https://github.com/finos/common-domain-model/pull/4118)

# Product Taxonomy Model - Adding "CFTC" value in TaxonomySourceEnum

_Background_

A gap has been identified in the model when capturing taxonomy values for commodity underlyer assets as defined by CFTC regulation. Introducing `CFTC` as a taxonomy source is necessary to properly map these values within the model and to support population of the **"Commodity Underlyer ID"** fields in DRR.

_What is being released?_

The contribution is the addition of a new `CFTC` value to the `TaxonomySourceEnum` in order to represent the Commodity Futures Trading Commission as a taxonomy source, enabling support for **Commodity Underlyer ID** rules under CFTC jurisdiction in DRR.

_Review Directions_

Changes can be reviewed in PR: [#4111](https://github.com/finos/common-domain-model/pull/4111)
