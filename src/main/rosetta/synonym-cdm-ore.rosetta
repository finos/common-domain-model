namespace cdm.synonyms.ore
version "${project.version}"

import cdm.base.math.*
import cdm.base.datetime.*
import cdm.base.staticdata.party.*
import cdm.base.staticdata.asset.rates.*

import cdm.observable.asset.*

import cdm.product.asset.*
import cdm.product.template.*
import cdm.product.common.schedule.*
import cdm.product.common.settlement.*

import cdm.legalagreement.contract.*
import cdm.event.common.*

synonym source ORE

synonym source ORE_1_0_39 extends ORE
{
    TradeState:
        + observationHistory
            [value "ignore"]

    Trade:
        + tradeIdentifier
        + party
            [value "Envelope" path "Trade"]
        + tradableProduct
            [value "Trade" mapper "ORECounterparty"]
        + party
            [value "Envelope" path "Trade"]

	TradableProduct:
		+ priceQuantity
			[value "LegData" path "SwapData"]

	Counterparty:
		+ partyReference
			[value "Envelope"]
		+ role
			[set to CounterpartyRoleEnum -> Party2 when rosettaPath = TradeState -> trade -> tradableProduct]

	 Price:
        + amount
         [value "Rate" path "FixedLegData->Rates"]
        + unitOfAmount
        + priceType
			[set to PriceTypeEnum->RatePrice when  "FixedLegData->Rates->Rate" exists ]

	 PriceQuantity:
        + price
		+ observable
            // [value "LegData" path "SwapData"]
        + quantity
            [value "Notionals"]

	FixedInterestRate:
		+ rate
			[value "Rate" path "FixedLegData->Rates"]

	Party:
		+ partyId
			[value "CounterParty" maps 2]
			[value "party_id" path "AdditionalFields"]

	Quantity:
		+ amount
			[value "Notional"]

	Product:
		+ contractualProduct
			[value "SwapData"]

	Payout:
		+ interestRatePayout
			[value "LegData"]

	InterestRatePayout:
		+ calculationPeriodDates
			[value "Rules" path "ScheduleData"]
		+ rateSpecification
		+ paymentDates
			[value "Rules" path "ScheduleData"]

	Frequency:
		+ periodMultiplier
			[value "Tenor" maps 2 pattern "([0-9]*).*" "$1"]
		+ period
			[value "Tenor" maps 2 pattern "[0-9]*(.*)" "$1"]

	CalculationPeriodDates:
		+ effectiveDate
			[hint "StartDate"]

	AdjustableOrRelativeDate:
		+ adjustableDate

	AdjustableDate:
		+ unadjustedDate
			[value "StartDate"]

	FloatingRateOption:
		+ floatingRateIndex
			[value "Index"]

	RateSpecification:
		+ fixedRate
			[value "FixedLegData"]
		+ floatingRate
			[value "FloatingLegData"]

	UnitType:
		+ currency
			[value "Currency"]

    enums

	FloatingRateIndexEnum:
		+ EUR_6M_EURIBOR_SWAP_CME_vs_LCH_ICAP
			[value "EUR-EURIBOR-6M"]

	PeriodEnum:
		+ D
			[value "D"]
		+ W
			[value "W"]
		+ M
			[value "M"]
		+ Y
			[value "Y"]
}
